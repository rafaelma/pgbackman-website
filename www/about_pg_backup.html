<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
  <title>PgBackMan - PostgreSQL Backup Manager - About PG backups</title>
  <meta name="description" content="PgBackMan - PostgreSQL backup manager" />
  <meta name="keywords" content="pgbackman backup postgresql pg_dump pg_dumpall manager" />
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
  <link rel="stylesheet" type="text/css" href="css/style.css" />
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
	<script type="text/javascript" src="jquery-1.4.3.min.js"></script>
	<script type="text/javascript" src="fancybox/jquery.mousewheel-3.0.4.pack.js"></script>
	<script type="text/javascript" src="fancybox/jquery.fancybox-1.3.4.pack.js"></script>
	<link rel="stylesheet" type="text/css" href="fancybox/jquery.fancybox-1.3.4.css" media="screen" />
	<script type="text/javascript">
		$(document).ready(function() {
			/*
			*   Examples - images
			*/

			$("a#example1").fancybox();

			$("a#example2").fancybox({
				'overlayShow'	: false,
				'transitionIn'	: 'elastic',
				'transitionOut'	: 'elastic'
			});

			$("a#example3").fancybox({
				'transitionIn'	: 'none',
				'transitionOut'	: 'none'	
			});

			$("a#example4").fancybox({
				'opacity'		: true,
				'overlayShow'	: false,
				'transitionIn'	: 'elastic',
				'transitionOut'	: 'none'
			});

			$("a#example5").fancybox();

			$("a#example6").fancybox({
				'titlePosition'		: 'outside',
				'overlayColor'		: '#000',
				'overlayOpacity'	: 0.9
			});

			$("a#example7").fancybox({
				'titlePosition'	: 'inside'
			});

			$("a#example8").fancybox({
				'titlePosition'	: 'over'
			});

			/*
			*   Examples - various
			*/

			$("#various1").fancybox({
				'titlePosition'		: 'inside',
				'transitionIn'		: 'none',
				'transitionOut'		: 'none'
			});

			$("#various2").fancybox();

			$("#various3").fancybox({
				'width'				: '75%',
				'height'			: '75%',
				'autoScale'			: false,
				'transitionIn'		: 'none',
				'transitionOut'		: 'none',
				'type'				: 'iframe'
			});

			$("#various4").fancybox({
				'padding'			: 0,
				'autoScale'			: false,
				'transitionIn'		: 'none',
				'transitionOut'		: 'none'
			});
		});
	</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-52322967-1', 'auto');
  ga('send', 'pageview');

</script>
</head>

<body>
  <div id="main">
    <div id="header">
      <div id="banner">
	    <img src="images/pgbackman_logo.jpg"><a href="index.html">PostgreSQL Backup Manager</a>
	  </div>
      <div id="menubar">
        <ul id="menu">
          <li><a href="index.html">Home</a></li>
	  <li><a href="about.html">About</a></li>
	  <li><a href="documentation.html">Docs</a></li>
	  <li><a href="download.html">Download</a></li>
	  <li><a href="support.html">Support</a></li>
          <li><a href="about_pg_backup.html">About PG backups</a></li>
        </ul>
      </div>
    </div>
    <div id="site_content">
      <div id="content">
        <div class="content_item">

	  <h1>About PostgreSQL backups</h1>

	  <div style="float:left; border: 2px solid #CCC; margin-right: 10px; padding: 5px;"><img src="images/Data-Database-backup-icon.png"/></div> 
	  
	  <p>Taking backups is an important administrative task that can
	  have some disastrous consequences if it is not done
	  right. The use of RAID configurations in your storage
	  system, replication between nodes, clustering and trusting
	  100% that your SAN will be up ARE NOT backup
	  strategies. These measures are necessary for HA (High
	  availability) but do not replace the necessity of taking
	  backups of our databases.</p>

	  <p>There are two different types of backup that can be use
	    with PostgreSQL to implement a good backup and restore strategy. They
	    are:</p>
	    
	  <ul>
	    <li>Physical backups</li> 
	    <li>Logical backups</li>
	  </ul>
	  
	  <p>Regardless of the type of backup used to backup your
	    databases, one needs a good <i>backup and restore plan</i>
	    that takes into account intervals, retention policies and
	    performance issues for a backup and the time needed to get
	    a full restoration of a database.</p>

	  <h2>Physical backups</h2>
	  
	  <p>This type of backup takes copies of the files where the
	    PostgreSQL saves the databases. There are several
	    techniques that can be used to take physical backups and
	    we are not going to explain them here. Check <i>Chapter
	    24. Backup and Restore</i> of the PostgreSQL documentation
	    for more information.</p>

	  <p>The important thing with physical backups is that some of
	    these techniques together with continuous archiving of
	    write ahead log (WAL) files can be used to implement PITR
	    (Point in time recovery) backups and achieve a full
	    disaster recovery solution.</p>

	  <p>There are several solutions that can be used for managing
	    PITR backups, such as PITRTools, OmniPITR, and Barman.</p>
	  
	  <h2>Logical backups</h2>

	  <p>PostgreSQL has two utilities, <tt>pg_dump</tt> and
	    <tt>pg_dumpall</tt>, for taking logical backups of
	    databases. They take a snapshot of a database at a given
	    moment.</p>

	  <p>These utilities take consistent backups of a database or
	    the whole cluster even if the databases are being used
	    concurrently. At the same time <tt>pg_dump</tt> and
	    <tt>pg_dumpall</tt> do not block other users accessing the
	    database when backups are being taken.</p>

	  <p>Even though a backup or snapshot created with <tt>pg_dump</tt>
	    or <tt>pg_dumpall</tt> can never guarantee a full disaster
	    recovery of all data changed between the moment when the
	    backup was taken and the moment of a future crash, they
	    are still necessary if you need to archive versions of a
	    database, move databases between PgSQL nodes and clone
	    databases between production / pre-production and/or
	    development servers.</p>

	  <p>Nevertheless, logical backups give us a great flexibility
	    in several situations and are also an easy way of taking
	    backups of databases not requiring PITR backups.</p>

	  <p>When taking a backup of a database we need the following
	    information to be sure we can make a restoration that
	    includes 100% of the data and definitions from the target
	    database:</p>
	  
	  <ol>
	    <li> Database schema</li>
	    <li> Database data</li>
	    <li> Roles owning objects in the database</li>
	    <li> Roles with privileges on objects in the database</li>
	    <li> Roles with privileges on the database or schemas</li>
	    <li> Creation of all the roles owning something or with privileges</li>
	    <li> Configuration parameters defined explicitly for a role</li>
	    <li> Configuration parameters defined explicitly for the database </li>
	  </ol>

	  <p>Unfortunately all this information cannot be obtained in
	    a single execution for only one database. 1, 2, 3 and 4
	    can be obtained with <tt>pg_dump</tt>. 5, 7 and 8 can be
	    obtained with a full <tt>pg_dumpall</tt> and 6 either with a
	    <tt>pg_dumpall -r</tt> or a full <tt>pg_dumpall</tt>.</p>

	  <p>At the same time, <tt>pg_dumpall</tt> will return all this
	    information for all databases in a cluster, not only the
	    database one wants to take a backup of.</p>

	  <p>This is something that PostgreSQL will have to improve in
	    the future so it gets easier to take a backup/snapshot of
	    a database in a single execution.</p>

	  <p>In the meantime, PgBackMan takes care of all this and it
	    delivers all the information needed to run a 100%
	    restoration of a database when we define a backup in the
	    system.</p>

	</div>
      </div>
      <div class="sidebar_container">
        <div class="sidebar">
          <div class="sidebar_top"></div>
          <div class="sidebar_item">
            <h2>Contact</h2>
 <h3><span style="color: #444; width: 55px;float: left;">Email:</span><a style="color: #06C4E6;" href="mailto:pgbackman@googlegroups.com">pgbackman@googlegroups.com</a></h3>
            <a href="http://twitter.com/pgbackman"><img src="images/icons/twitter.png" alt="twitter" /></a><a href="http://github.com/rafaelma/pgbackman/"><img src="images/icons/github2.png" alt="github" /></a><a href="https://groups.google.com/forum/feed/pgbackman/topics/rss.xml?num=15"><img src="images/icons/rss.png" alt="RSS" /></a>
          </div>
          <div class="sidebar_base"></div>
        </div>
       
      </div>
    </div>
    <div id="footer">
      Copyright © 2013-2014 by <a href="http://www.usit.uio.no/english/about/organisation/it-drift/gd/gid/staff/rafael/index.html">Rafael Martinez Guerrero</a> / <a href="http://www.postgresql.org.es"/>PostgreSQL-es</a>.<br>Website template by <a href="http://www.araynordesign.co.uk">ARaynorDesign</a> 
    </div>
  </div>
  <p style="float: left;padding: 0;">&nbsp;</p>
</body>
</html>



